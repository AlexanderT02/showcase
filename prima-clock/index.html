<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PRIMA Clock</title>

<script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>

<link rel="stylesheet" href="../styles.css">
</head>

<body>
<div id="app" class="container">
<h1>PRIMA Clock</h1>
<p class="meta">
PRIMA Clock is an internal production system that records billable work as financial data.
It is designed to produce deterministic, reproducible billing records — not just to log time.
</p>

<p>
Used daily by internal teams as the operational basis for project costing and invoice preparation.
</p>

<div class="grid">

  <div>
    <h2>Purpose</h2>
    <div class="card">
      <p>
      Time tracking without a strict ownership chain creates ambiguity in billing.
      PRIMA Clock enforces responsibility by requiring every recorded session
      to be linked to a client and project.
      </p>
    </div>
  </div>

  <div>
    <h2>Design Approach</h2>
      <div class="card">
        <p>
        The system models financial ownership explicitly:
        User → Session → Project → Client.
        This structure enables consistent reporting, department comparisons and
        reliable preparation for invoicing.
        </p>
      </div>
  </div>

  <div>
    <h2>Impact</h2>
    <div class="card">
      <ul>
        <li>Replaced informal/manual time tracking with a single source of truth</li>
        <li>Enabled reproducible, traceable billing records</li>
        <li>Centralized project-based cost allocation across departments</li>
      </ul>
    </div>
  </div>

</div>

<h2>Core Flow</h2>

<div class="core-showcase card">
  <div class="core-video">
    <video autoplay loop muted playsinline @click="open('assets/hero.mp4')">
      <source src="assets/hero.mp4" type="video/mp4">
    </video>
  </div>
  <div class="core-text">
    <h3>Daily Workflow</h3>
    <p>
    Start and stop timers, add notes and switch projects — sessions become consistent, traceable records
    that can be used for cost allocation and invoicing preparation.
    </p>
  </div>
</div>

<h2>Key Features</h2>

<div class="feature-showcase card">
  <div class="feature-video">
    <button class="nav prev" @click="prev">&#10094;</button>

    <div class="video-wrapper">

      <video
        ref="featureVideo"
        playsinline
        preload="auto"
        @click="open('assets/feature/'+active.video)"
        @loadeddata="videoLoaded"
      ></video>

      <div class="spinner" v-if="loading"></div>

    </div>

    <button class="nav next" @click="next">&#10095;</button>
  </div>

  <div class="feature-text">
    <h3>{{active.title}}</h3>
    <p>{{active.text}}</p>
  </div>

  <div class="feature-dots">
    <span v-for="(f,i) in features"
      :key="i"
      :class="['dot',{active:i===index}]"
      @click="index=i"></span>
  </div>
</div>
<div class="grid">

  <div>
    <h2>Traceability & Corrections</h2>
    <div class="card">
      <p>
      Work entries can be created and adjusted afterwards, since real workflows are often reconstructed later
      (e.g. forgotten timers or incomplete notes).
      </p>
      <p>
      The system therefore focuses on traceability instead of rigidity:
      every entry remains attributable to a user, project and time range,
      making later changes understandable rather than hidden.
      </p>
    </div>
  </div>

  <div>
    <h2>Consistency Rules</h2>
    <div class="card">
      <p>
      The system prevents invalid financial states instead of fixing them later in reports:
      </p>
      <ul>
        <li>No overlapping sessions per user</li>
        <li>Project assignment required</li>
        <li>Duration validation</li>
        <li>Timer recovery for forgotten stops</li>
        <li>Manual entries allowed but validated</li>
      </ul>
    </div>
  </div>

  <div>
    <h2>Architecture Overview</h2>
    <div class="card">
      <p>
      PRIMA Clock treats the backend as the single source of truth. 
      All calculations and validations happen server-side so the UI can never create inconsistent financial data.
      </p>
      <p>
      The interface allows flexible input, but correctness is enforced server-side to keep reporting consistent.
      </p>
    </div>
  </div>

</div>

<div>
  <h2>Engineering Challenge</h2>
  <div class="card">
    <p>
    The core challenge was handling mutable historical data while reports must remain deterministic.
    Users may track time live, reconstruct their day later or edit sessions afterwards — yet totals must always recompute identically.
    </p>
    <p>
    To guarantee consistency, all inputs pass through the same server-side normalization and validation pipeline
    and are transformed into a unified session structure.
    </p>
    <p>
    Because the worktime table grows continuously and a single day can contain many sessions,
    pagination based on raw rows was not scalable.
    The solution was to separate the recording model from the daily reporting view and paginate by day instead of sessions.
    This keeps queries efficient while still allowing historical edits and accurate recalculations.
    </p>
  </div>
</div>

<div class="interface-showcase">
  <h2>Interface</h2>

  <div class="showcase-desktop" v-if="ui.desktop">
    <img :src="'assets/interface/'+ui.desktop" @click="open('assets/interface/'+ui.desktop)">
  </div>

  <div
    v-for="(device,i) in ui.devices"
    :key="i"
    class="float-device"
    :class="device.class"
  >
    <img :src="'assets/interface/'+device.img" @click="open('assets/interface/'+device.img)">
  </div>

</div>

<div class="grid">

  <div>
    <h2>System Context</h2>
    <div class="card">
      <p>
      The system operates as part of the company’s operational infrastructure rather than an isolated tool.
      It includes authentication, role-based access control, database persistence and automated CI/CD deployment.
      </p>
      <p>
      An import/export API allows integration into ERP workflows, enabling recorded work to be transferred
      into downstream processes such as accounting and project controlling.
      </p>
      <p>
      The interface shown here represents only the human interaction layer of a larger data flow between systems.
      </p>
    </div>
  </div>

  <div>
    <h2>My Contribution</h2>
    <div class="card">
      <p>
      Owned the project end-to-end — from requirements analysis and system design
      to implementation, testing and CI/CD deployment.
      Designed the architecture, built the frontend and backend, modeled the database
      and put the system into production use.
      </p>
    </div>
  </div>

  <div>
    <h2>Tech Stack</h2>
    <div class="card">
      <p>
      <strong>Frontend:</strong> Vue 3, TypeScript<br>
      <strong>Backend:</strong> Spring Boot (Java)<br>
      <strong>Database:</strong> PostgreSQL<br>
      <strong>Sessions & Cache:</strong> Redis<br>
      <strong>Infrastructure:</strong> Docker, NGINX
      </p>
    </div>
  </div>

</div>

<div class="lightbox" v-if="lightbox">
  <button class="close" @click="lightbox=null">×</button>
  <img v-if="!isVideo(lightbox)" :src="lightbox">
  <video v-else controls autoplay>
    <source :src="lightbox" type="video/mp4">
  </video>
</div>

<div style="display:none">
  <video
    v-for="f in features"
    :key="f.video"
    preload="auto"
  >
    <source :src="'assets/feature/'+f.video" type="video/mp4">
  </video>
</div>
</div>

<script>
const { createApp } = Vue

createApp({

  data(){
    return{
      lightbox:null,
      index:0,
      loading:true,
      ui:{
        desktop:"dekstop.PNG",
        devices:[
          {class:"phone-left", img:"mobile1.PNG"},
          {class:"phone-right", img:"mobile.PNG"},
          {class:"tablet", img:"tablet.PNG"}
        ]
      },
      features:[
        {title:"Timeline",text:"Review sessions with a complete historical view. Corrections are handled explicitly to preserve traceability.",video:"feature1.mp4"},
        {title:"Project Assignment",text:"Sessions require project and client assignment, enforcing ownership before time can be recorded.",video:"feature2.mp4"},
        {title:"Admin",text:"Company-wide oversight with controlled adjustments and period-level protection for billing consistency.",video:"feature3.mp4"},
        {title:"Metrics",text:"Compare clients and departments using consistent, validated data for cost allocation insights.",video:"feature4.mp4"},
      ]
    }
  },

  computed:{
    active(){ return this.features[this.index] }
  },

  watch:{
    index(){
      this.loadVideo()
    }
  },

  mounted(){
    this.loadVideo()
  },

  methods:{

    open(src){ this.lightbox=src },

    isVideo(src){ return src.endsWith(".mp4") },

    loadVideo(){
      const v = this.$refs.featureVideo
      if(!v) return

      this.loading = true

      v.pause()
      v.src = "assets/feature/" + this.active.video
      v.load()

      v.oncanplay = () => {
        this.loading = false
        v.play()
      }
    },

    videoLoaded(){
      this.loading = false
    },

    next(){
      this.index=(this.index+1)%this.features.length
    },

    prev(){
      this.index=(this.index-1+this.features.length)%this.features.length
    }
  }

}).mount("#app")
</script>

</body>
</html>